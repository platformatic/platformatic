{
  "$id": "https://schemas.platformatic.dev/@platformatic/service/3.0.0-alpha.1.json",
  "version": "3.0.0-alpha.1",
  "title": "Platformatic Service Config",
  "type": "object",
  "properties": {
    "basePath": {
      "type": "string"
    },
    "server": {
      "type": "object",
      "properties": {
        "hostname": {
          "type": "string"
        },
        "port": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "string"
            }
          ]
        },
        "pluginTimeout": {
          "type": "integer"
        },
        "healthCheck": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "object",
              "properties": {
                "enabled": {
                  "type": "boolean"
                },
                "interval": {
                  "type": "integer"
                }
              },
              "additionalProperties": true
            }
          ]
        },
        "ignoreTrailingSlash": {
          "type": "boolean"
        },
        "ignoreDuplicateSlashes": {
          "type": "boolean"
        },
        "connectionTimeout": {
          "type": "integer"
        },
        "keepAliveTimeout": {
          "type": "integer",
          "default": 5000
        },
        "maxRequestsPerSocket": {
          "type": "integer"
        },
        "forceCloseConnections": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "string",
              "pattern": "^idle$"
            }
          ]
        },
        "requestTimeout": {
          "type": "integer"
        },
        "bodyLimit": {
          "type": "integer"
        },
        "maxParamLength": {
          "type": "integer"
        },
        "disableRequestLogging": {
          "type": "boolean"
        },
        "exposeHeadRoutes": {
          "type": "boolean"
        },
        "logger": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "object",
              "properties": {
                "level": {
                  "type": "string",
                  "default": "info",
                  "oneOf": [
                    {
                      "enum": [
                        "fatal",
                        "error",
                        "warn",
                        "info",
                        "debug",
                        "trace",
                        "silent"
                      ]
                    },
                    {
                      "pattern": "^\\{.+\\}$"
                    }
                  ]
                },
                "transport": {
                  "anyOf": [
                    {
                      "type": "object",
                      "properties": {
                        "target": {
                          "type": "string",
                          "resolveModule": true
                        },
                        "options": {
                          "type": "object"
                        }
                      },
                      "additionalProperties": false
                    },
                    {
                      "type": "object",
                      "properties": {
                        "targets": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "target": {
                                "anyOf": [
                                  {
                                    "type": "string",
                                    "resolveModule": true
                                  },
                                  {
                                    "type": "string",
                                    "resolvePath": true
                                  }
                                ]
                              },
                              "options": {
                                "type": "object"
                              },
                              "level": {
                                "type": "string"
                              }
                            },
                            "additionalProperties": false
                          }
                        },
                        "options": {
                          "type": "object"
                        }
                      },
                      "additionalProperties": false
                    }
                  ]
                },
                "pipeline": {
                  "type": "object",
                  "properties": {
                    "target": {
                      "type": "string",
                      "resolveModule": true
                    },
                    "options": {
                      "type": "object"
                    }
                  },
                  "additionalProperties": false
                },
                "formatters": {
                  "type": "object",
                  "properties": {
                    "path": {
                      "type": "string",
                      "resolvePath": true
                    }
                  },
                  "required": [
                    "path"
                  ],
                  "additionalProperties": false
                },
                "timestamp": {
                  "enum": [
                    "epochTime",
                    "unixTime",
                    "nullTime",
                    "isoTime"
                  ]
                },
                "redact": {
                  "type": "object",
                  "properties": {
                    "paths": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "censor": {
                      "type": "string",
                      "default": "[redacted]"
                    }
                  },
                  "required": [
                    "paths"
                  ],
                  "additionalProperties": false
                },
                "base": {
                  "anyOf": [
                    {
                      "type": "object",
                      "additionalProperties": true
                    },
                    {
                      "type": "null"
                    }
                  ]
                },
                "messageKey": {
                  "type": "string"
                },
                "customLevels": {
                  "type": "object",
                  "additionalProperties": true
                }
              },
              "required": [
                "level"
              ],
              "default": {},
              "additionalProperties": true
            }
          ]
        },
        "loggerInstance": {
          "type": "object"
        },
        "serializerOpts": {
          "type": "object",
          "properties": {
            "schema": {
              "type": "object"
            },
            "ajv": {
              "type": "object"
            },
            "rounding": {
              "type": "string",
              "enum": [
                "floor",
                "ceil",
                "round",
                "trunc"
              ],
              "default": "trunc"
            },
            "debugMode": {
              "type": "boolean"
            },
            "mode": {
              "type": "string",
              "enum": [
                "debug",
                "standalone"
              ]
            },
            "largeArraySize": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "string"
                }
              ],
              "default": 20000
            },
            "largeArrayMechanism": {
              "type": "string",
              "enum": [
                "default",
                "json-stringify"
              ],
              "default": "default"
            }
          }
        },
        "caseSensitive": {
          "type": "boolean"
        },
        "requestIdHeader": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "boolean",
              "const": false
            }
          ]
        },
        "requestIdLogLabel": {
          "type": "string"
        },
        "jsonShorthand": {
          "type": "boolean"
        },
        "trustProxy": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "string"
            },
            {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            {
              "type": "integer"
            }
          ]
        },
        "http2": {
          "type": "boolean"
        },
        "https": {
          "type": "object",
          "properties": {
            "allowHTTP1": {
              "type": "boolean"
            },
            "key": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "object",
                  "properties": {
                    "path": {
                      "type": "string",
                      "resolvePath": true
                    }
                  },
                  "additionalProperties": false
                },
                {
                  "type": "array",
                  "items": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "object",
                        "properties": {
                          "path": {
                            "type": "string",
                            "resolvePath": true
                          }
                        },
                        "additionalProperties": false
                      }
                    ]
                  }
                }
              ]
            },
            "cert": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "object",
                  "properties": {
                    "path": {
                      "type": "string",
                      "resolvePath": true
                    }
                  },
                  "additionalProperties": false
                },
                {
                  "type": "array",
                  "items": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "object",
                        "properties": {
                          "path": {
                            "type": "string",
                            "resolvePath": true
                          }
                        },
                        "additionalProperties": false
                      }
                    ]
                  }
                }
              ]
            },
            "requestCert": {
              "type": "boolean"
            },
            "rejectUnauthorized": {
              "type": "boolean"
            }
          },
          "additionalProperties": false,
          "required": [
            "key",
            "cert"
          ]
        },
        "cors": {
          "type": "object",
          "$comment": "See https://github.com/fastify/fastify-cors",
          "properties": {
            "origin": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "string"
                },
                {
                  "type": "array",
                  "items": {
                    "anyOf": [
                      {
                        "type": "string"
                      },
                      {
                        "type": "object",
                        "properties": {
                          "regexp": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "regexp"
                        ]
                      }
                    ]
                  }
                },
                {
                  "type": "object",
                  "properties": {
                    "regexp": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "regexp"
                  ]
                }
              ]
            },
            "methods": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "allowedHeaders": {
              "type": "string",
              "description": "Comma separated string of allowed headers."
            },
            "exposedHeaders": {
              "anyOf": [
                {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                {
                  "type": "string",
                  "description": "Comma separated string of exposed headers."
                }
              ]
            },
            "credentials": {
              "type": "boolean"
            },
            "maxAge": {
              "type": "integer"
            },
            "preflightContinue": {
              "type": "boolean",
              "default": false
            },
            "optionsSuccessStatus": {
              "type": "integer",
              "default": 204
            },
            "preflight": {
              "type": "boolean",
              "default": true
            },
            "strictPreflight": {
              "type": "boolean",
              "default": true
            },
            "hideOptionsRoute": {
              "type": "boolean",
              "default": true
            }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "plugins": {
      "type": "object",
      "properties": {
        "packages": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "options": {
                    "type": "object",
                    "additionalProperties": true
                  }
                },
                "required": [
                  "name"
                ]
              }
            ]
          }
        },
        "paths": {
          "type": "array",
          "items": {
            "anyOf": [
              {
                "type": "string",
                "resolvePath": true
              },
              {
                "type": "object",
                "properties": {
                  "path": {
                    "type": "string",
                    "resolvePath": true
                  },
                  "encapsulate": {
                    "type": "boolean",
                    "default": true
                  },
                  "maxDepth": {
                    "type": "integer"
                  },
                  "autoHooks": {
                    "type": "boolean"
                  },
                  "autoHooksPattern": {
                    "type": "string"
                  },
                  "cascadeHooks": {
                    "type": "boolean"
                  },
                  "overwriteHooks": {
                    "type": "boolean"
                  },
                  "routeParams": {
                    "type": "boolean"
                  },
                  "forceESM": {
                    "type": "boolean"
                  },
                  "ignoreFilter": {
                    "type": "string"
                  },
                  "matchFilter": {
                    "type": "string"
                  },
                  "ignorePattern": {
                    "type": "string"
                  },
                  "scriptPattern": {
                    "type": "string"
                  },
                  "indexPattern": {
                    "type": "string"
                  },
                  "options": {
                    "type": "object",
                    "additionalProperties": true
                  }
                }
              }
            ]
          }
        }
      },
      "additionalProperties": false,
      "anyOf": [
        {
          "required": [
            "paths"
          ]
        },
        {
          "required": [
            "packages"
          ]
        }
      ]
    },
    "telemetry": {
      "type": "object",
      "properties": {
        "enabled": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "string"
            }
          ]
        },
        "serviceName": {
          "type": "string",
          "description": "The name of the service. Defaults to the folder name if not specified."
        },
        "version": {
          "type": "string",
          "description": "The version of the service (optional)"
        },
        "skip": {
          "type": "array",
          "description": "An array of paths to skip when creating spans. Useful for health checks and other endpoints that do not need to be traced.",
          "items": {
            "type": "object",
            "properties": {
              "path": {
                "type": "string",
                "description": "The path to skip. Can be a string or a regex."
              },
              "method": {
                "description": "HTTP method to skip",
                "type": "string",
                "enum": [
                  "GET",
                  "POST",
                  "PUT",
                  "DELETE",
                  "PATCH",
                  "HEAD",
                  "OPTIONS"
                ]
              }
            }
          }
        },
        "exporter": {
          "anyOf": [
            {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "type": {
                    "type": "string",
                    "enum": [
                      "console",
                      "otlp",
                      "zipkin",
                      "memory",
                      "file"
                    ],
                    "default": "console"
                  },
                  "options": {
                    "type": "object",
                    "description": "Options for the exporter. These are passed directly to the exporter.",
                    "properties": {
                      "url": {
                        "type": "string",
                        "description": "The URL to send the traces to. Not used for console or memory exporters."
                      },
                      "headers": {
                        "type": "object",
                        "description": "Headers to send to the exporter. Not used for console or memory exporters."
                      },
                      "path": {
                        "type": "string",
                        "description": "The path to write the traces to. Only for file exporter."
                      }
                    }
                  },
                  "additionalProperties": false
                }
              }
            },
            {
              "type": "object",
              "properties": {
                "type": {
                  "type": "string",
                  "enum": [
                    "console",
                    "otlp",
                    "zipkin",
                    "memory",
                    "file"
                  ],
                  "default": "console"
                },
                "options": {
                  "type": "object",
                  "description": "Options for the exporter. These are passed directly to the exporter.",
                  "properties": {
                    "url": {
                      "type": "string",
                      "description": "The URL to send the traces to. Not used for console or memory exporters."
                    },
                    "headers": {
                      "type": "object",
                      "description": "Headers to send to the exporter. Not used for console or memory exporters."
                    },
                    "path": {
                      "type": "string",
                      "description": "The path to write the traces to. Only for file exporter."
                    }
                  }
                },
                "additionalProperties": false
              }
            }
          ]
        }
      },
      "required": [
        "serviceName"
      ],
      "additionalProperties": false
    },
    "watch": {
      "anyOf": [
        {
          "type": "object",
          "properties": {
            "enabled": {
              "default": true,
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "string"
                }
              ]
            },
            "allow": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "minItems": 1,
              "nullable": true,
              "default": null
            },
            "ignore": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "nullable": true,
              "default": null
            }
          },
          "additionalProperties": false
        },
        {
          "type": "boolean"
        },
        {
          "type": "string"
        }
      ]
    },
    "$schema": {
      "type": "string"
    },
    "module": {
      "type": "string"
    },
    "application": {
      "type": "object",
      "properties": {},
      "additionalProperties": false,
      "required": [],
      "default": {}
    },
    "service": {
      "type": "object",
      "properties": {
        "openapi": {
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "info": {
                  "$ref": "#/$defs/info"
                },
                "jsonSchemaDialect": {
                  "type": "string",
                  "default": "https://spec.openapis.org/oas/3.1/dialect/base"
                },
                "servers": {
                  "type": "array",
                  "items": {
                    "$ref": "#/$defs/server"
                  },
                  "default": [
                    {
                      "url": "/"
                    }
                  ]
                },
                "paths": {
                  "$ref": "#/$defs/paths"
                },
                "webhooks": {
                  "type": "object",
                  "additionalProperties": {
                    "$ref": "#/$defs/path-item-or-reference"
                  }
                },
                "components": {
                  "$ref": "#/$defs/components"
                },
                "security": {
                  "type": "array",
                  "items": {
                    "$ref": "#/$defs/security-requirement"
                  }
                },
                "tags": {
                  "type": "array",
                  "items": {
                    "$ref": "#/$defs/tag"
                  }
                },
                "externalDocs": {
                  "$ref": "#/$defs/external-documentation"
                },
                "swaggerPrefix": {
                  "type": "string",
                  "description": "Base URL for the OpenAPI Swagger Documentation"
                },
                "path": {
                  "type": "string",
                  "description": "Path to an OpenAPI spec file",
                  "resolvePath": true
                }
              },
              "additionalProperties": false
            },
            {
              "type": "boolean"
            }
          ]
        },
        "graphql": {
          "anyOf": [
            {
              "type": "object",
              "properties": {
                "graphiql": {
                  "type": "boolean"
                }
              },
              "additionalProperties": false
            },
            {
              "type": "boolean"
            }
          ]
        },
        "proxy": {
          "anyOf": [
            {
              "type": "boolean",
              "const": false
            },
            {
              "type": "object",
              "properties": {
                "upstream": {
                  "type": "string"
                },
                "prefix": {
                  "type": "string"
                },
                "hostname": {
                  "type": "string"
                },
                "ws": {
                  "type": "object",
                  "properties": {
                    "upstream": {
                      "type": "string"
                    },
                    "reconnect": {
                      "type": "object",
                      "properties": {
                        "pingInterval": {
                          "type": "number"
                        },
                        "maxReconnectionRetries": {
                          "type": "number"
                        },
                        "reconnectInterval": {
                          "type": "number"
                        },
                        "reconnectDecay": {
                          "type": "number"
                        },
                        "connectionTimeout": {
                          "type": "number"
                        },
                        "reconnectOnClose": {
                          "type": "boolean"
                        },
                        "logs": {
                          "type": "boolean"
                        }
                      }
                    },
                    "hooks": {
                      "type": "object",
                      "properties": {
                        "path": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "path"
                      ],
                      "additionalProperties": false
                    }
                  },
                  "required": [],
                  "additionalProperties": false
                }
              },
              "required": [],
              "additionalProperties": false
            }
          ]
        }
      },
      "additionalProperties": false
    },
    "runtime": {
      "type": "object",
      "properties": {
        "preload": {
          "anyOf": [
            {
              "type": "string",
              "resolvePath": true
            },
            {
              "type": "array",
              "items": {
                "type": "string",
                "resolvePath": true
              }
            }
          ]
        },
        "basePath": {
          "type": "string"
        },
        "workers": {
          "anyOf": [
            {
              "type": "number",
              "minimum": 1
            },
            {
              "type": "string"
            }
          ],
          "default": 1
        },
        "logger": {
          "type": "object",
          "properties": {
            "level": {
              "type": "string",
              "default": "info",
              "oneOf": [
                {
                  "enum": [
                    "fatal",
                    "error",
                    "warn",
                    "info",
                    "debug",
                    "trace",
                    "silent"
                  ]
                },
                {
                  "pattern": "^\\{.+\\}$"
                }
              ]
            },
            "transport": {
              "anyOf": [
                {
                  "type": "object",
                  "properties": {
                    "target": {
                      "type": "string",
                      "resolveModule": true
                    },
                    "options": {
                      "type": "object"
                    }
                  },
                  "additionalProperties": false
                },
                {
                  "type": "object",
                  "properties": {
                    "targets": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "target": {
                            "anyOf": [
                              {
                                "type": "string",
                                "resolveModule": true
                              },
                              {
                                "type": "string",
                                "resolvePath": true
                              }
                            ]
                          },
                          "options": {
                            "type": "object"
                          },
                          "level": {
                            "type": "string"
                          }
                        },
                        "additionalProperties": false
                      }
                    },
                    "options": {
                      "type": "object"
                    }
                  },
                  "additionalProperties": false
                }
              ]
            },
            "pipeline": {
              "type": "object",
              "properties": {
                "target": {
                  "type": "string",
                  "resolveModule": true
                },
                "options": {
                  "type": "object"
                }
              },
              "additionalProperties": false
            },
            "formatters": {
              "type": "object",
              "properties": {
                "path": {
                  "type": "string",
                  "resolvePath": true
                }
              },
              "required": [
                "path"
              ],
              "additionalProperties": false
            },
            "timestamp": {
              "enum": [
                "epochTime",
                "unixTime",
                "nullTime",
                "isoTime"
              ]
            },
            "redact": {
              "type": "object",
              "properties": {
                "paths": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "censor": {
                  "type": "string",
                  "default": "[redacted]"
                }
              },
              "required": [
                "paths"
              ],
              "additionalProperties": false
            },
            "base": {
              "anyOf": [
                {
                  "type": "object",
                  "additionalProperties": true
                },
                {
                  "type": "null"
                }
              ]
            },
            "messageKey": {
              "type": "string"
            },
            "customLevels": {
              "type": "object",
              "additionalProperties": true
            }
          },
          "required": [
            "level"
          ],
          "default": {},
          "additionalProperties": true
        },
        "server": {
          "type": "object",
          "properties": {
            "hostname": {
              "type": "string",
              "default": "127.0.0.1"
            },
            "port": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "string"
                }
              ]
            },
            "http2": {
              "type": "boolean"
            },
            "https": {
              "type": "object",
              "properties": {
                "allowHTTP1": {
                  "type": "boolean"
                },
                "key": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "path": {
                          "type": "string",
                          "resolvePath": true
                        }
                      },
                      "additionalProperties": false
                    },
                    {
                      "type": "array",
                      "items": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "object",
                            "properties": {
                              "path": {
                                "type": "string",
                                "resolvePath": true
                              }
                            },
                            "additionalProperties": false
                          }
                        ]
                      }
                    }
                  ]
                },
                "cert": {
                  "anyOf": [
                    {
                      "type": "string"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "path": {
                          "type": "string",
                          "resolvePath": true
                        }
                      },
                      "additionalProperties": false
                    },
                    {
                      "type": "array",
                      "items": {
                        "anyOf": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "object",
                            "properties": {
                              "path": {
                                "type": "string",
                                "resolvePath": true
                              }
                            },
                            "additionalProperties": false
                          }
                        ]
                      }
                    }
                  ]
                },
                "requestCert": {
                  "type": "boolean"
                },
                "rejectUnauthorized": {
                  "type": "boolean"
                }
              },
              "additionalProperties": false,
              "required": [
                "key",
                "cert"
              ]
            }
          },
          "additionalProperties": false
        },
        "startTimeout": {
          "default": 30000,
          "type": "number",
          "minimum": 0
        },
        "restartOnError": {
          "default": true,
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "number",
              "minimum": 0
            }
          ]
        },
        "gracefulShutdown": {
          "type": "object",
          "properties": {
            "runtime": {
              "anyOf": [
                {
                  "type": "number",
                  "minimum": 1
                },
                {
                  "type": "string"
                }
              ],
              "default": 10000
            },
            "service": {
              "anyOf": [
                {
                  "type": "number",
                  "minimum": 1
                },
                {
                  "type": "string"
                }
              ],
              "default": 10000
            }
          },
          "default": {},
          "required": [
            "runtime",
            "service"
          ],
          "additionalProperties": false
        },
        "health": {
          "type": "object",
          "default": {},
          "properties": {
            "enabled": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "string"
                }
              ],
              "default": true
            },
            "interval": {
              "anyOf": [
                {
                  "type": "number",
                  "minimum": 0
                },
                {
                  "type": "string"
                }
              ],
              "default": 30000
            },
            "gracePeriod": {
              "anyOf": [
                {
                  "type": "number",
                  "minimum": 0
                },
                {
                  "type": "string"
                }
              ],
              "default": 30000
            },
            "maxUnhealthyChecks": {
              "anyOf": [
                {
                  "type": "number",
                  "minimum": 1
                },
                {
                  "type": "string"
                }
              ],
              "default": 10
            },
            "maxELU": {
              "anyOf": [
                {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 1
                },
                {
                  "type": "string"
                }
              ],
              "default": 0.99
            },
            "maxHeapUsed": {
              "anyOf": [
                {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 1
                },
                {
                  "type": "string"
                }
              ],
              "default": 0.99
            },
            "maxHeapTotal": {
              "anyOf": [
                {
                  "type": "number",
                  "minimum": 0
                },
                {
                  "type": "string"
                }
              ],
              "default": 4294967296
            },
            "maxYoungGeneration": {
              "anyOf": [
                {
                  "type": "number",
                  "minimum": 0
                },
                {
                  "type": "string"
                }
              ]
            }
          },
          "additionalProperties": false
        },
        "undici": {
          "type": "object",
          "properties": {
            "agentOptions": {
              "type": "object",
              "additionalProperties": true
            },
            "interceptors": {
              "anyOf": [
                {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "module": {
                        "type": "string"
                      },
                      "options": {
                        "type": "object",
                        "additionalProperties": true
                      }
                    },
                    "required": [
                      "module",
                      "options"
                    ]
                  }
                },
                {
                  "type": "object",
                  "properties": {
                    "Client": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "module": {
                            "type": "string"
                          },
                          "options": {
                            "type": "object",
                            "additionalProperties": true
                          }
                        },
                        "required": [
                          "module",
                          "options"
                        ]
                      }
                    },
                    "Pool": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "module": {
                            "type": "string"
                          },
                          "options": {
                            "type": "object",
                            "additionalProperties": true
                          }
                        },
                        "required": [
                          "module",
                          "options"
                        ]
                      }
                    },
                    "Agent": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "module": {
                            "type": "string"
                          },
                          "options": {
                            "type": "object",
                            "additionalProperties": true
                          }
                        },
                        "required": [
                          "module",
                          "options"
                        ]
                      }
                    }
                  }
                }
              ]
            }
          }
        },
        "httpCache": {
          "oneOf": [
            {
              "type": "boolean"
            },
            {
              "type": "object",
              "properties": {
                "store": {
                  "type": "string"
                },
                "methods": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "default": [
                    "GET",
                    "HEAD"
                  ],
                  "minItems": 1
                },
                "cacheTagsHeader": {
                  "type": "string"
                },
                "maxSize": {
                  "type": "integer"
                },
                "maxEntrySize": {
                  "type": "integer"
                },
                "maxCount": {
                  "type": "integer"
                }
              }
            }
          ]
        },
        "watch": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "string"
            }
          ]
        },
        "managementApi": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "string"
            },
            {
              "type": "object",
              "properties": {
                "logs": {
                  "type": "object",
                  "properties": {
                    "maxSize": {
                      "type": "number",
                      "minimum": 5,
                      "default": 200
                    }
                  },
                  "additionalProperties": false
                }
              },
              "additionalProperties": false
            }
          ],
          "default": true
        },
        "metrics": {
          "anyOf": [
            {
              "type": "boolean"
            },
            {
              "type": "object",
              "properties": {
                "port": {
                  "anyOf": [
                    {
                      "type": "integer"
                    },
                    {
                      "type": "string"
                    }
                  ]
                },
                "enabled": {
                  "anyOf": [
                    {
                      "type": "boolean"
                    },
                    {
                      "type": "string"
                    }
                  ]
                },
                "hostname": {
                  "type": "string"
                },
                "endpoint": {
                  "type": "string"
                },
                "auth": {
                  "type": "object",
                  "properties": {
                    "username": {
                      "type": "string"
                    },
                    "password": {
                      "type": "string"
                    }
                  },
                  "additionalProperties": false,
                  "required": [
                    "username",
                    "password"
                  ]
                },
                "labels": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "string"
                  }
                },
                "readiness": {
                  "anyOf": [
                    {
                      "type": "boolean"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "endpoint": {
                          "type": "string"
                        },
                        "success": {
                          "type": "object",
                          "properties": {
                            "statusCode": {
                              "type": "number"
                            },
                            "body": {
                              "type": "string"
                            }
                          },
                          "additionalProperties": false
                        },
                        "fail": {
                          "type": "object",
                          "properties": {
                            "statusCode": {
                              "type": "number"
                            },
                            "body": {
                              "type": "string"
                            }
                          },
                          "additionalProperties": false
                        }
                      },
                      "additionalProperties": false
                    }
                  ]
                },
                "liveness": {
                  "anyOf": [
                    {
                      "type": "boolean"
                    },
                    {
                      "type": "object",
                      "properties": {
                        "endpoint": {
                          "type": "string"
                        },
                        "success": {
                          "type": "object",
                          "properties": {
                            "statusCode": {
                              "type": "number"
                            },
                            "body": {
                              "type": "string"
                            }
                          },
                          "additionalProperties": false
                        },
                        "fail": {
                          "type": "object",
                          "properties": {
                            "statusCode": {
                              "type": "number"
                            },
                            "body": {
                              "type": "string"
                            }
                          },
                          "additionalProperties": false
                        }
                      },
                      "additionalProperties": false
                    }
                  ]
                },
                "additionalProperties": false
              }
            }
          ]
        },
        "telemetry": {
          "type": "object",
          "properties": {
            "enabled": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "string"
                }
              ]
            },
            "serviceName": {
              "type": "string",
              "description": "The name of the service. Defaults to the folder name if not specified."
            },
            "version": {
              "type": "string",
              "description": "The version of the service (optional)"
            },
            "skip": {
              "type": "array",
              "description": "An array of paths to skip when creating spans. Useful for health checks and other endpoints that do not need to be traced.",
              "items": {
                "type": "object",
                "properties": {
                  "path": {
                    "type": "string",
                    "description": "The path to skip. Can be a string or a regex."
                  },
                  "method": {
                    "description": "HTTP method to skip",
                    "type": "string",
                    "enum": [
                      "GET",
                      "POST",
                      "PUT",
                      "DELETE",
                      "PATCH",
                      "HEAD",
                      "OPTIONS"
                    ]
                  }
                }
              }
            },
            "exporter": {
              "anyOf": [
                {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "type": {
                        "type": "string",
                        "enum": [
                          "console",
                          "otlp",
                          "zipkin",
                          "memory",
                          "file"
                        ],
                        "default": "console"
                      },
                      "options": {
                        "type": "object",
                        "description": "Options for the exporter. These are passed directly to the exporter.",
                        "properties": {
                          "url": {
                            "type": "string",
                            "description": "The URL to send the traces to. Not used for console or memory exporters."
                          },
                          "headers": {
                            "type": "object",
                            "description": "Headers to send to the exporter. Not used for console or memory exporters."
                          },
                          "path": {
                            "type": "string",
                            "description": "The path to write the traces to. Only for file exporter."
                          }
                        }
                      },
                      "additionalProperties": false
                    }
                  }
                },
                {
                  "type": "object",
                  "properties": {
                    "type": {
                      "type": "string",
                      "enum": [
                        "console",
                        "otlp",
                        "zipkin",
                        "memory",
                        "file"
                      ],
                      "default": "console"
                    },
                    "options": {
                      "type": "object",
                      "description": "Options for the exporter. These are passed directly to the exporter.",
                      "properties": {
                        "url": {
                          "type": "string",
                          "description": "The URL to send the traces to. Not used for console or memory exporters."
                        },
                        "headers": {
                          "type": "object",
                          "description": "Headers to send to the exporter. Not used for console or memory exporters."
                        },
                        "path": {
                          "type": "string",
                          "description": "The path to write the traces to. Only for file exporter."
                        }
                      }
                    },
                    "additionalProperties": false
                  }
                }
              ]
            }
          },
          "required": [
            "serviceName"
          ],
          "additionalProperties": false
        },
        "inspectorOptions": {
          "type": "object",
          "properties": {
            "host": {
              "type": "string"
            },
            "port": {
              "type": "number"
            },
            "breakFirstLine": {
              "type": "boolean"
            },
            "watchDisabled": {
              "type": "boolean"
            }
          }
        },
        "serviceTimeout": {
          "anyOf": [
            {
              "type": "number",
              "minimum": 1
            },
            {
              "type": "string"
            }
          ],
          "default": 300000
        },
        "messagingTimeout": {
          "anyOf": [
            {
              "type": "number",
              "minimum": 1
            },
            {
              "type": "string"
            }
          ],
          "default": 30000
        },
        "env": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "sourceMaps": {
          "type": "boolean",
          "default": false
        },
        "scheduler": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "enabled": {
                "anyOf": [
                  {
                    "type": "boolean"
                  },
                  {
                    "type": "string"
                  }
                ],
                "default": true
              },
              "name": {
                "type": "string"
              },
              "cron": {
                "type": "string"
              },
              "callbackUrl": {
                "type": "string"
              },
              "method": {
                "type": "string",
                "enum": [
                  "GET",
                  "POST",
                  "PUT",
                  "PATCH",
                  "DELETE"
                ],
                "default": "GET"
              },
              "headers": {
                "type": "object",
                "additionalProperties": {
                  "type": "string"
                }
              },
              "body": {
                "anyOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object",
                    "additionalProperties": true
                  }
                ]
              },
              "maxRetries": {
                "type": "number",
                "minimum": 0,
                "default": 3
              }
            },
            "required": [
              "name",
              "cron",
              "callbackUrl"
            ]
          }
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false,
  "$defs": {
    "info": {
      "$comment": "https://spec.openapis.org/oas/v3.1.0#info-object",
      "type": "object",
      "properties": {
        "title": {
          "type": "string"
        },
        "summary": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "termsOfService": {
          "type": "string"
        },
        "contact": {
          "$ref": "#/$defs/contact"
        },
        "license": {
          "$ref": "#/$defs/license"
        },
        "version": {
          "type": "string"
        }
      },
      "required": [
        "title",
        "version"
      ],
      "$ref": "#/$defs/specification-extensions"
    },
    "contact": {
      "$comment": "https://spec.openapis.org/oas/v3.1.0#contact-object",
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "url": {
          "type": "string"
        },
        "email": {
          "type": "string"
        }
      },
      "$ref": "#/$defs/specification-extensions"
    },
    "license": {
      "$comment": "https://spec.openapis.org/oas/v3.1.0#license-object",
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "identifier": {
          "type": "string"
        },
        "url": {
          "type": "string"
        }
      },
      "required": [
        "name"
      ],
      "$ref": "#/$defs/specification-extensions"
    },
    "server": {
      "$comment": "https://spec.openapis.org/oas/v3.1.0#server-object",
      "type": "object",
      "properties": {
        "url": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "variables": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/$defs/server-variable"
          }
        }
      },
      "required": [
        "url"
      ],
      "$ref": "#/$defs/specification-extensions"
    },
    "server-variable": {
      "$comment": "https://spec.openapis.org/oas/v3.1.0#server-variable-object",
      "type": "object",
      "properties": {
        "enum": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "minItems": 1
        },
        "default": {
          "type": "string"
        },
        "description": {
          "type": "string"
        }
      },
      "required": [
        "default"
      ],
      "$ref": "#/$defs/specification-extensions"
    },
    "components": {
      "$comment": "https://spec.openapis.org/oas/v3.1.0#components-object",
      "type": "object",
      "properties": {
        "schemas": {
          "type": "object"
        },
        "responses": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/$defs/response-or-reference"
          }
        },
        "parameters": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/$defs/parameter-or-reference"
          }
        },
        "examples": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/$defs/example-or-reference"
          }
        },
        "requestBodies": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/$defs/request-body-or-reference"
          }
        },
        "headers": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/$defs/header-or-reference"
          }
        },
        "securitySchemes": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/$defs/security-scheme-or-reference"
          }
        },
        "links": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/$defs/link-or-reference"
          }
        },
        "callbacks": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/$defs/callbacks-or-reference"
          }
        },
        "pathItems": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/$defs/path-item-or-reference"
          }
        }
      },
      "$ref": "#/$defs/specification-extensions"
    },
    "paths": {
      "$comment": "https://spec.openapis.org/oas/v3.1.0#paths-object",
      "type": "object",
      "patternProperties": {
        "^/": {
          "$ref": "#/$defs/path-item"
        }
      },
      "$ref": "#/$defs/specification-extensions"
    },
    "path-item": {
      "$comment": "https://spec.openapis.org/oas/v3.1.0#path-item-object",
      "type": "object",
      "properties": {
        "summary": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "servers": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/server"
          }
        },
        "parameters": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/parameter-or-reference"
          }
        },
        "get": {
          "$ref": "#/$defs/operation"
        },
        "put": {
          "$ref": "#/$defs/operation"
        },
        "post": {
          "$ref": "#/$defs/operation"
        },
        "delete": {
          "$ref": "#/$defs/operation"
        },
        "options": {
          "$ref": "#/$defs/operation"
        },
        "head": {
          "$ref": "#/$defs/operation"
        },
        "patch": {
          "$ref": "#/$defs/operation"
        },
        "trace": {
          "$ref": "#/$defs/operation"
        }
      },
      "$ref": "#/$defs/specification-extensions"
    },
    "path-item-or-reference": {
      "if": {
        "type": "object",
        "required": [
          "$ref"
        ]
      },
      "then": {
        "$ref": "#/$defs/reference"
      },
      "else": {
        "$ref": "#/$defs/path-item"
      }
    },
    "operation": {
      "$comment": "https://spec.openapis.org/oas/v3.1.0#operation-object",
      "type": "object",
      "properties": {
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "summary": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "externalDocs": {
          "$ref": "#/$defs/external-documentation"
        },
        "operationId": {
          "type": "string"
        },
        "parameters": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/parameter-or-reference"
          }
        },
        "requestBody": {
          "$ref": "#/$defs/request-body-or-reference"
        },
        "responses": {
          "$ref": "#/$defs/responses"
        },
        "callbacks": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/$defs/callbacks-or-reference"
          }
        },
        "security": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/security-requirement"
          }
        },
        "servers": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/server"
          }
        }
      },
      "$ref": "#/$defs/specification-extensions"
    },
    "external-documentation": {
      "$comment": "https://spec.openapis.org/oas/v3.1.0#external-documentation-object",
      "type": "object",
      "properties": {
        "description": {
          "type": "string"
        },
        "url": {
          "type": "string"
        }
      },
      "required": [
        "url"
      ],
      "$ref": "#/$defs/specification-extensions"
    },
    "parameter": {
      "$comment": "https://spec.openapis.org/oas/v3.1.0#parameter-object",
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "in": {
          "enum": [
            "query",
            "header",
            "path",
            "cookie"
          ]
        },
        "description": {
          "type": "string"
        },
        "required": {
          "default": false,
          "type": "boolean"
        },
        "content": {
          "type": "object",
          "$ref": "#/$defs/content",
          "minProperties": 1,
          "maxProperties": 1
        }
      },
      "required": [
        "name",
        "in"
      ],
      "oneOf": [
        {
          "required": [
            "schema"
          ]
        },
        {
          "required": [
            "content"
          ]
        }
      ],
      "if": {
        "type": "object",
        "properties": {
          "in": {
            "const": "query"
          }
        },
        "required": [
          "in"
        ]
      },
      "then": {
        "type": "object",
        "properties": {
          "allowEmptyValue": {
            "default": false,
            "type": "boolean"
          }
        }
      },
      "$ref": "#/$defs/specification-extensions"
    },
    "parameter-or-reference": {
      "if": {
        "type": "object",
        "required": [
          "$ref"
        ]
      },
      "then": {
        "$ref": "#/$defs/reference"
      },
      "else": {
        "$ref": "#/$defs/parameter"
      }
    },
    "request-body": {
      "$comment": "https://spec.openapis.org/oas/v3.1.0#request-body-object",
      "type": "object",
      "properties": {
        "description": {
          "type": "string"
        },
        "content": {
          "$ref": "#/$defs/content"
        },
        "required": {
          "default": false,
          "type": "boolean"
        }
      },
      "required": [
        "content"
      ],
      "$ref": "#/$defs/specification-extensions"
    },
    "request-body-or-reference": {
      "if": {
        "type": "object",
        "required": [
          "$ref"
        ]
      },
      "then": {
        "$ref": "#/$defs/reference"
      },
      "else": {
        "$ref": "#/$defs/request-body"
      }
    },
    "content": {
      "$comment": "https://spec.openapis.org/oas/v3.1.0#fixed-fields-10",
      "type": "object",
      "additionalProperties": {
        "$ref": "#/$defs/media-type"
      }
    },
    "media-type": {
      "$comment": "https://spec.openapis.org/oas/v3.1.0#media-type-object",
      "type": "object",
      "properties": {
        "encoding": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/$defs/encoding"
          }
        }
      },
      "allOf": [
        {
          "$ref": "#/$defs/specification-extensions"
        },
        {
          "$ref": "#/$defs/examples"
        }
      ]
    },
    "encoding": {
      "$comment": "https://spec.openapis.org/oas/v3.1.0#encoding-object",
      "type": "object",
      "properties": {
        "contentType": {
          "type": "string"
        },
        "headers": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/$defs/header-or-reference"
          }
        },
        "style": {
          "default": "form",
          "enum": [
            "form",
            "spaceDelimited",
            "pipeDelimited",
            "deepObject"
          ]
        },
        "explode": {
          "type": "boolean"
        },
        "allowReserved": {
          "default": false,
          "type": "boolean"
        }
      },
      "allOf": [
        {
          "$ref": "#/$defs/specification-extensions"
        },
        {
          "$ref": "#/$defs/encoding/$defs/explode-default"
        }
      ],
      "$defs": {
        "explode-default": {
          "if": {
            "type": "object",
            "properties": {
              "style": {
                "const": "form"
              }
            },
            "required": [
              "style"
            ]
          },
          "then": {
            "type": "object",
            "properties": {
              "explode": {
                "default": true
              }
            }
          },
          "else": {
            "type": "object",
            "properties": {
              "explode": {
                "default": false
              }
            }
          }
        }
      }
    },
    "responses": {
      "$comment": "https://spec.openapis.org/oas/v3.1.0#responses-object",
      "type": "object",
      "additionalProperties": {
        "$ref": "#/$defs/response-or-reference"
      },
      "minProperties": 1,
      "$ref": "#/$defs/specification-extensions"
    },
    "response": {
      "$comment": "https://spec.openapis.org/oas/v3.1.0#response-object",
      "type": "object",
      "properties": {
        "description": {
          "type": "string"
        },
        "headers": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/$defs/header-or-reference"
          }
        },
        "content": {
          "$ref": "#/$defs/content"
        },
        "links": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/$defs/link-or-reference"
          }
        }
      },
      "required": [
        "description"
      ],
      "$ref": "#/$defs/specification-extensions"
    },
    "response-or-reference": {
      "if": {
        "type": "object",
        "required": [
          "$ref"
        ]
      },
      "then": {
        "$ref": "#/$defs/reference"
      },
      "else": {
        "$ref": "#/$defs/response"
      }
    },
    "callbacks": {
      "$comment": "https://spec.openapis.org/oas/v3.1.0#callback-object",
      "type": "object",
      "$ref": "#/$defs/specification-extensions",
      "additionalProperties": {
        "$ref": "#/$defs/path-item-or-reference"
      }
    },
    "callbacks-or-reference": {
      "if": {
        "type": "object",
        "required": [
          "$ref"
        ]
      },
      "then": {
        "$ref": "#/$defs/reference"
      },
      "else": {
        "$ref": "#/$defs/callbacks"
      }
    },
    "example": {
      "$comment": "https://spec.openapis.org/oas/v3.1.0#example-object",
      "type": "object",
      "properties": {
        "summary": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "value": true,
        "externalValue": {
          "type": "string"
        }
      },
      "not": {
        "required": [
          "value",
          "externalValue"
        ]
      },
      "$ref": "#/$defs/specification-extensions"
    },
    "example-or-reference": {
      "if": {
        "type": "object",
        "required": [
          "$ref"
        ]
      },
      "then": {
        "$ref": "#/$defs/reference"
      },
      "else": {
        "$ref": "#/$defs/example"
      }
    },
    "link": {
      "$comment": "https://spec.openapis.org/oas/v3.1.0#link-object",
      "type": "object",
      "properties": {
        "operationRef": {
          "type": "string"
        },
        "operationId": {
          "type": "string"
        },
        "parameters": {
          "$ref": "#/$defs/map-of-strings"
        },
        "requestBody": true,
        "description": {
          "type": "string"
        },
        "body": {
          "$ref": "#/$defs/server"
        }
      },
      "oneOf": [
        {
          "required": [
            "operationRef"
          ]
        },
        {
          "required": [
            "operationId"
          ]
        }
      ],
      "$ref": "#/$defs/specification-extensions"
    },
    "link-or-reference": {
      "if": {
        "type": "object",
        "required": [
          "$ref"
        ]
      },
      "then": {
        "$ref": "#/$defs/reference"
      },
      "else": {
        "$ref": "#/$defs/link"
      }
    },
    "header": {
      "$comment": "https://spec.openapis.org/oas/v3.1.0#header-object",
      "type": "object",
      "properties": {
        "description": {
          "type": "string"
        },
        "required": {
          "default": false,
          "type": "boolean"
        },
        "content": {
          "type": "object",
          "$ref": "#/$defs/content",
          "minProperties": 1,
          "maxProperties": 1
        }
      },
      "oneOf": [
        {
          "required": [
            "schema"
          ]
        },
        {
          "required": [
            "content"
          ]
        }
      ],
      "$ref": "#/$defs/specification-extensions"
    },
    "header-or-reference": {
      "if": {
        "type": "object",
        "required": [
          "$ref"
        ]
      },
      "then": {
        "$ref": "#/$defs/reference"
      },
      "else": {
        "$ref": "#/$defs/header"
      }
    },
    "tag": {
      "$comment": "https://spec.openapis.org/oas/v3.1.0#tag-object",
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "externalDocs": {
          "$ref": "#/$defs/external-documentation"
        }
      },
      "required": [
        "name"
      ],
      "$ref": "#/$defs/specification-extensions"
    },
    "reference": {
      "$comment": "https://spec.openapis.org/oas/v3.1.0#reference-object",
      "type": "object",
      "properties": {
        "$ref": {
          "type": "string"
        },
        "summary": {
          "type": "string"
        },
        "description": {
          "type": "string"
        }
      }
    },
    "schema": {
      "$comment": "https://spec.openapis.org/oas/v3.1.0#schema-object",
      "type": [
        "object",
        "boolean"
      ]
    },
    "security-scheme": {
      "$comment": "https://spec.openapis.org/oas/v3.1.0#security-scheme-object",
      "type": "object",
      "properties": {
        "type": {
          "enum": [
            "apiKey",
            "http",
            "mutualTLS",
            "oauth2",
            "openIdConnect"
          ]
        },
        "description": {
          "type": "string"
        }
      },
      "required": [
        "type"
      ],
      "allOf": [
        {
          "$ref": "#/$defs/specification-extensions"
        },
        {
          "$ref": "#/$defs/security-scheme/$defs/type-apikey"
        },
        {
          "$ref": "#/$defs/security-scheme/$defs/type-http"
        },
        {
          "$ref": "#/$defs/security-scheme/$defs/type-http-bearer"
        },
        {
          "$ref": "#/$defs/security-scheme/$defs/type-oauth2"
        },
        {
          "$ref": "#/$defs/security-scheme/$defs/type-oidc"
        }
      ],
      "$defs": {
        "type-apikey": {
          "if": {
            "type": "object",
            "properties": {
              "type": {
                "const": "apiKey"
              }
            },
            "required": [
              "type"
            ]
          },
          "then": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "in": {
                "enum": [
                  "query",
                  "header",
                  "cookie"
                ]
              }
            },
            "required": [
              "name",
              "in"
            ]
          }
        },
        "type-http": {
          "if": {
            "type": "object",
            "properties": {
              "type": {
                "const": "http"
              }
            },
            "required": [
              "type"
            ]
          },
          "then": {
            "type": "object",
            "properties": {
              "scheme": {
                "type": "string"
              }
            },
            "required": [
              "scheme"
            ]
          }
        },
        "type-http-bearer": {
          "if": {
            "type": "object",
            "properties": {
              "type": {
                "const": "http"
              },
              "scheme": {
                "type": "string",
                "pattern": "^[Bb][Ee][Aa][Rr][Ee][Rr]$"
              }
            },
            "required": [
              "type",
              "scheme"
            ]
          },
          "then": {
            "type": "object",
            "properties": {
              "bearerFormat": {
                "type": "string"
              }
            }
          }
        },
        "type-oauth2": {
          "if": {
            "type": "object",
            "properties": {
              "type": {
                "const": "oauth2"
              }
            },
            "required": [
              "type"
            ]
          },
          "then": {
            "type": "object",
            "properties": {
              "flows": {
                "$ref": "#/$defs/oauth-flows"
              }
            },
            "required": [
              "flows"
            ]
          }
        },
        "type-oidc": {
          "if": {
            "type": "object",
            "properties": {
              "type": {
                "const": "openIdConnect"
              }
            },
            "required": [
              "type"
            ]
          },
          "then": {
            "type": "object",
            "properties": {
              "openIdConnectUrl": {
                "type": "string"
              }
            },
            "required": [
              "openIdConnectUrl"
            ]
          }
        }
      }
    },
    "security-scheme-or-reference": {
      "if": {
        "type": "object",
        "required": [
          "$ref"
        ]
      },
      "then": {
        "$ref": "#/$defs/reference"
      },
      "else": {
        "$ref": "#/$defs/security-scheme"
      }
    },
    "oauth-flows": {
      "type": "object",
      "properties": {
        "implicit": {
          "$ref": "#/$defs/oauth-flows/$defs/implicit"
        },
        "password": {
          "$ref": "#/$defs/oauth-flows/$defs/password"
        },
        "clientCredentials": {
          "$ref": "#/$defs/oauth-flows/$defs/client-credentials"
        },
        "authorizationCode": {
          "$ref": "#/$defs/oauth-flows/$defs/authorization-code"
        }
      },
      "$ref": "#/$defs/specification-extensions",
      "$defs": {
        "implicit": {
          "type": "object",
          "properties": {
            "authorizationUrl": {
              "type": "string"
            },
            "refreshUrl": {
              "type": "string"
            },
            "scopes": {
              "$ref": "#/$defs/map-of-strings"
            }
          },
          "required": [
            "authorizationUrl",
            "scopes"
          ],
          "$ref": "#/$defs/specification-extensions"
        },
        "password": {
          "type": "object",
          "properties": {
            "tokenUrl": {
              "type": "string"
            },
            "refreshUrl": {
              "type": "string"
            },
            "scopes": {
              "$ref": "#/$defs/map-of-strings"
            }
          },
          "required": [
            "tokenUrl",
            "scopes"
          ],
          "$ref": "#/$defs/specification-extensions"
        },
        "client-credentials": {
          "type": "object",
          "properties": {
            "tokenUrl": {
              "type": "string"
            },
            "refreshUrl": {
              "type": "string"
            },
            "scopes": {
              "$ref": "#/$defs/map-of-strings"
            }
          },
          "required": [
            "tokenUrl",
            "scopes"
          ],
          "$ref": "#/$defs/specification-extensions"
        },
        "authorization-code": {
          "type": "object",
          "properties": {
            "authorizationUrl": {
              "type": "string"
            },
            "tokenUrl": {
              "type": "string"
            },
            "refreshUrl": {
              "type": "string"
            },
            "scopes": {
              "$ref": "#/$defs/map-of-strings"
            }
          },
          "required": [
            "authorizationUrl",
            "tokenUrl",
            "scopes"
          ],
          "$ref": "#/$defs/specification-extensions"
        }
      }
    },
    "security-requirement": {
      "$comment": "https://spec.openapis.org/oas/v3.1.0#security-requirement-object",
      "type": "object",
      "additionalProperties": {
        "type": "array",
        "items": {
          "type": "string"
        }
      }
    },
    "specification-extensions": {
      "$comment": "https://spec.openapis.org/oas/v3.1.0#specification-extensions",
      "type": "object",
      "patternProperties": {
        "^x-": true
      }
    },
    "examples": {
      "type": "object",
      "properties": {
        "example": true,
        "examples": {
          "type": "object",
          "additionalProperties": {
            "$ref": "#/$defs/example-or-reference"
          }
        }
      }
    },
    "map-of-strings": {
      "type": "object",
      "additionalProperties": {
        "type": "string"
      }
    }
  }
}
